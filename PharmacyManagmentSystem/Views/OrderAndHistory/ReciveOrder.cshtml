
@{
    ViewBag.Title = "ReciveOrder";
}

<h2>Recive Order Form</h2> @Html.ActionLink("Back To Orders", "OrderIndex")

@using (Html.BeginForm())
{
    var grid = new WebGrid(Model, rowsPerPage: 5, canPage: true, canSort: true);
    //var ordr = ViewData["newOrders"];
    <br />
   <br />
   <label id="errorlable" style="color:red"></label>
    <br />
    <br />
  
    <div>
        <div id="OrderGrid2" style="align-content:center;width:inherit;background-color:lightgoldenrodyellow;">
            @grid.GetHtml(
                tableStyle: "table",
                headerStyle: "header",
               columns: grid.Columns
               (grid.Column("Id", "Sr. No"),
               grid.Column("CategoryName", "Category"),
               grid.Column("ProductName1", "Product"),
               grid.Column("Size", "Size"),
               grid.Column("SupplierName", "Supplier"),
               grid.Column("Quantity", "Quantity Ordered"),
               grid.Column(header:"Quentity Recived",format: @<input id="quentityRecive" type="number" style="width:100%" /> ),
               grid.Column(header: "Quantity Accepted", format: @<input id="quantityAccepted" type="number" style="width:100%" /> ),
               grid.Column(header: "Price / Item ", format: @<input id="pricePrItem" type="text"  style="width:100%" /> ),
               grid.Column(header: "Reciveing Date", format: @<input type="text" id="datepicker" class="span2 datepicker" style="width:100%" placeholder="Date..." name="date1"> ),
               grid.Column(header: "Expire Date", format: @<input type="text" id="datepicker" class="span2 datepicker" style="width:100%" placeholder="Date..." name="date2"> ),
               grid.Column(header: "Batch No", format: @<input id="batchNo" type="text"  style="width:100%" /> ),
               grid.Column(header:"Save Item",format: @<a href="~/OrderAndHistory/SaveItem?id=@item.P_o_ID">Save</a>)
               ), mode: WebGridPagerModes.Numeric)
        </div>
    </div>
    
}
<script src="/Scripts/jquery-1.10.2.js" type="text/javascript"></script>
<script src="/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="/Scripts/bootstrap-datepicker.js" type="text/javascript"></script>
<script type="text/javascript">
        $(document).ready(function () {
        $(function () {
            $('.datepicker').datepicker({
                format: 'mm-dd-yyyy'
            });
        });
        $('#saveOrder').click(function (e) {
            e.preventDefault();
            if ($('#datepicker').val().length < 1) {
             document.getElementById("errorlable").innerHTML = "Please select a date";
            }
            else {
                $.ajax({
                    type: 'POST', url: '@Url.Action("SaveNewOrder")', dataType: 'json', data: { Date: $('#datepicker').val() },
                    success: function (ok) {
                        location.reload();
                        document.getElementById("errorlable").innerHTML = "Order Saved";
                     },
                    error: function (ex) {
                      document.getElementById("errorlable").innerHTML = "Order Not saved, Try again ";
                    }
                });
            }
       });
        });
</script>
